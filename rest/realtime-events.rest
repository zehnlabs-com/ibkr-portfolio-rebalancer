### Test variables
@baseUrl=https://rest.ably.io/channels
@channelName={{$dotenv TEST_STRATEGY_NAME}}
@eventId=00000000-0000-0000-0000-000000000000
@auth={{$dotenv REBALANCE_EVENT_SUBSCRIPTION_API_KEY}}


### Print Positions - Log all current positions in the account
POST {{baseUrl}}/{{channelName}}/messages
Authorization: Basic {{auth}}
Content-Type: application/json

{
  "data": { "exec": "print-positions", "eventId": "{{eventId}}" }
}

### Print Equity - Log total account value
POST {{baseUrl}}/{{channelName}}/messages
Authorization: Basic {{auth}}
Content-Type: application/json

{
  "data": { "exec": "print-equity", "eventId": "{{eventId}}" }
}

### Print Orders - Log all pending orders
POST {{baseUrl}}/{{channelName}}/messages
Authorization: Basic {{auth}}
Content-Type: application/json

{
  "data": { "exec": "print-orders", "eventId": "{{eventId}}" }
}

### Print Rebalance - Show what orders would be executed (dry run)
POST {{baseUrl}}/{{channelName}}/messages
Authorization: Basic {{auth}}
Content-Type: application/json

{
  "data": { "exec": "print-rebalance", "eventId": "{{eventId}}" }
}

### Cancel Orders - Cancel all pending orders
POST {{baseUrl}}/{{channelName}}/messages
Authorization: Basic {{auth}}
Content-Type: application/json

{
  "data": { "exec": "cancel-orders", "eventId": "{{eventId}}" }
}

### Rebalance - LIVE TRADING - Execute actual rebalance with real orders
# WARNING: This will place actual orders in your brokerage account!
# Only use this when you actually want to rebalance your portfolio
POST {{baseUrl}}/{{channelName}}/messages
Authorization: Basic {{auth}}
Content-Type: application/json

{
  "data": { "exec": "rebalance", "eventId": "{{eventId}}" }
}

### -------------------------------------------------------- ###
### NEGATIVE TESTS - These should trigger errors or warnings ###
### -------------------------------------------------------- ###



### Test Invalid Action - Should trigger an error
POST {{baseUrl}}/{{channelName}}/messages
Authorization: Basic {{auth}}
Content-Type: application/json

{
  "data": { "exec": "invalid-action", "eventId": "{{eventId}}" }
}

### Test Missing exec - Should trigger an error requiring action specification
POST {{baseUrl}}/{{channelName}}/messages
Authorization: Basic {{auth}}
Content-Type: application/json

{
  "data": { "message": "test without action", "eventId": "{{eventId}}" }
}



